<mat-card>
  <mat-card-title>Set stock threshold</mat-card-title>
  <mat-card-content>
    <form [formGroup]="form" class="form-grid">
      <ng-container *ngIf="stockItem; else selectPrompt">
        <mat-form-field appearance="outline">
          <mat-label>Item</mat-label>
          <input matInput formControlName="itemName" [disabled]="true" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Threshold</mat-label>
          <input matInput type="number" formControlName="threshold" min="0" />
          <mat-error *ngIf="form.get('threshold')?.hasError('required')">Threshold is required.</mat-error>
          <mat-error *ngIf="form.get('threshold')?.hasError('min')">Threshold cannot be negative.</mat-error>
        </mat-form-field>
      </ng-container>
      <ng-template #selectPrompt>
        <p class="muted">Select an item from the list to set a threshold.</p>
      </ng-template>
    </form>

    <div class="actions">
      <button mat-flat-button color="primary" (click)="submit()" [disabled]="isSaving || !stockItem">
        Save threshold
      </button>
      <button mat-stroked-button color="primary" (click)="clear()" [disabled]="isSaving">Clear</button>
      <span class="status" *ngIf="statusMessage">{{ statusMessage }}</span>
    </div>
  </mat-card-content>
</mat-card>
